<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js" defer></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />


<style>
  .mySwiper,
  .mySwiper2 {
    display: none;
  }

  .swiper {
    width: 100%;
    height: 300px;
    margin-left: auto;
    margin-right: auto;
  }

  .swiper-slide {
    background-size: cover;
    background-position: center;
  }

  .mySwiper2 {
    height: 80%;
    width: 100%;
  }

  .mySwiper {
    height: 20%;
    box-sizing: border-box;
    padding: 10px 0;
  }

  .mySwiper .swiper-slide {
    width: 25%;
    height: 100%;
    opacity: 0.4;
  }

  .mySwiper .swiper-slide-thumb-active {
    opacity: 1;
  }

  .swiper-slide img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .mySwiper iframe,
  .mySwiper video {
    height: 100%;
    pointer-events: none;
  }

  .mySwiper2 iframe,
  .mySwiper2 video {
    height: 100%;
  }

  .swiper-button-next,
  .swiper-button-prev {
    display: none;
  }
</style>


<div class="max-w-6xl mx-auto mt-8 py-4 px-4">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
    <div>

      <div class="swiper mySwiper2">
        <div class="swiper-wrapper">
          {% for media in product.media %}
            <div class="swiper-slide">
              {% render 'product-media'
                , media: media %}
            </div>
          {% endfor %}
        </div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
      </div>

      <div thumbsSlider="" class="swiper mySwiper">
        <div class="swiper-wrapper">
          {% for media in product.media %}
            <div class="swiper-slide">
              {% render 'product-media'
                , media: media %}
            </div>
          {% endfor %}
        </div>
      </div>

    </div>

    <div>
      Product description
    </div>
  </div>
</div>

<!-- Initialize Swiper -->
<script>
    const interval = setInterval(() => {
      console.log("hi");

      if(!window?.Swiper) return;

      const swiper = new Swiper(".mySwiper", {
        // loop: true,
        spaceBetween: 10,
        slidesPerView: 4,
        freeMode: true,
        watchSlidesProgress: true,
        navigation: false
      });
  
      const swiper2 = new Swiper(".mySwiper2", {
        // loop: true,
        spaceBetween: 10,
        thumbs: {
          swiper: swiper,
        },
      });

      document.querySelector('.mySwiper2').style.display = 'block';
      document.querySelector('.mySwiper').style.display = 'block';

      clearInterval(interval);
    }, 200)
</script>

{% comment %} {% assign current_variant = product.selected_or_first_available_variant %}
                  {% assign featured_image = current_variant.featured_image | default: product.featured_image %}
                  <img src="{{ featured_image | img_url: 'large' }}" alt="{{ featured_image.alt | escape }}" id="ProductPhotoImg">
                  {% for image in product.images %}
                    <a href="{{ image.src | img_url: 'large' }}">
                      <img src="{{ image.src | img_url: 'compact' }}" alt="{{ image.alt | escape }}">
                    </a>
                  {% endfor %}
                  <h1>{{ product.title }}</h1>
                  <form action="/cart/add" method="post" enctype="multipart/form-data" id="AddToCartForm">
                    <select name="id" id="productSelect">
                      {% for variant in product.variants %}
                        {% if variant.available %}
                          <option value="{{ variant.id }}">
                            {{ variant.title }} - {{ variant.price | money_with_currency }}
                          </option>
                        {% else %}
                          <option disabled="disabled">
                            {{ variant.title }} - sold out
                          </option>
                        {% endif %}
                      {% endfor %}
                    </select>
                    {{ current_variant.price | money }}
                    <label for="Quantity">quantity</label>
                    <input type="number" id="Quantity" name="quantity" value="1" min="1">
                    <button type="submit" name="add" id="AddToCart">Add to cart</button>
                  </form>
<div>{{ product.description }}</div> {% endcomment %}